# this is the "smakefile" for Amiga SASC6
# CFLAGS  = data=far nominc streq nostkchk
#  data=near
SCOPTS = UNSCHAR STRMERGE NOSTKCHK PARMS=REGISTER data=far OPTIMIZE CPU=68000 DEFINE=OLDINCLUDES=1	
LIBS   =  LIB:amiga.lib
# LIB:cgraphx.lib LIB:sc.lib
SLO    = SC SD ND
BUILDDIR = build
AFLAGS = -dSASASM=1

BINARIES = keyboardview.gadget
# keyboardviewTest keyboardviewTest_static

GADGETOBJS = \
 $(BUILDDIR)/classinit.s.o \
 $(BUILDDIR)/class_keyboardview_lib.c.o \
 $(BUILDDIR)/class_keyboardview_dispatch.c.o \
 $(BUILDDIR)/class_keyboardview_attribs.c.o \
 $(BUILDDIR)/class_keyboardview_render.c.o \
 $(BUILDDIR)/class_keyboardview_handleinput.c.o

all: $(BINARIES)

$(BUILDDIR)/classinit.s.o: classinit.s $(BUILDDIR)
	asm -o$@ $(AFLAGS) classinit.s 

$(BUILDDIR)/class_keyboardview_lib.c.o: class_keyboardview_lib.c $(BUILDDIR)
	sc class_keyboardview_lib.c $(SCOPTS) OBJNAME=$@

$(BUILDDIR)/class_keyboardview_dispatch.c.o: class_keyboardview_dispatch.c $(BUILDDIR)
	sc class_keyboardview_dispatch.c $(SCOPTS) OBJNAME=$@

$(BUILDDIR)/class_keyboardview_attribs.c.o: class_keyboardview_attribs.c $(BUILDDIR)
	sc class_keyboardview_attribs.c $(SCOPTS) OBJNAME=$@

$(BUILDDIR)/class_keyboardview_render.c.o: class_keyboardview_render.c $(BUILDDIR)
	sc class_keyboardview_render.c $(SCOPTS) OBJNAME=$@

$(BUILDDIR)/class_keyboardview_handleinput.c.o: class_keyboardview_handleinput.c $(BUILDDIR)
	sc class_keyboardview_handleinput.c $(SCOPTS) OBJNAME=$@


$(BUILDDIR):
	-makedir $(BUILDDIR)
	
keyboardview.gadget: $(GADGETOBJS)
	slink $(GADGETOBJS) lib $(LIBS) to $@ 

clean:
	-delete ALL FORCE $(BUILDDIR)
	-delete $(BINARIES) \#?.(info|o) QUIET
	-delete \#?.(o|lnk)


#	slink FROM LIB:c.o $*.o $(SLO) LIB $(LIBS) TO $@

